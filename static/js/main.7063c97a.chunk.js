(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{194:function(e,t,n){},272:function(e,t){},282:function(e,t){},284:function(e,t){},299:function(e,t){},301:function(e,t){},329:function(e,t){},331:function(e,t){},332:function(e,t){},337:function(e,t){},339:function(e,t){},345:function(e,t){},347:function(e,t){},366:function(e,t){},378:function(e,t){},381:function(e,t){},424:function(e,t,n){},425:function(e,t,n){},426:function(e,t,n){},427:function(e,t,n){},431:function(e,t,n){"use strict";n.r(t);var c=n(195),a=n(196),s=n(203),r=n(202),i=n(0),o=n.n(i),l=n(21),u=n.n(l),b=n(10),j=n(1),d=o.a.createContext();function p(e){var t=Object(i.useState)({displayCompleted:!1,pageLimit:4}),n=Object(b.a)(t,2),c=n[0],a=n[1],s=Object(i.useState)(!1),r=Object(b.a)(s,2),o=r[0],l=r[1];Object(i.useEffect)((function(){a(JSON.parse(localStorage.getItem("pageSettingsContext"))||c),console.log(c)}),[o]);var u={displayCompleted:c.displayCompleted,pageLimit:c.pageLimit,submitFlag:o,setSubmitFlag:l};return Object(j.jsx)(d.Provider,{value:u,children:e.children})}var O=n(18),h=n.n(O),x=n(27),m=n(28),f=n.n(m),g=n(197),v=n.n(g),y=(n(278),n(67)),k=n.n(y),C=o.a.createContext();var w=function(e){var t=Object(i.useState)(!1),n=Object(b.a)(t,2),c=n[0],a=n[1],s=Object(i.useState)({}),r=Object(b.a)(s,2),o=r[0],l=r[1],u=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("https://todo-backend-h3.herokuapp.com/signup",t);case 3:e.sent,console.log("signed up"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("https://todo-backend-h3.herokuapp.com/signin").set("authorization","Basic ".concat(v.a.encode("".concat(t,":").concat(n))));case 3:c=e.sent,p(c.body),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null===t||void 0===t?void 0:t.token)){e.next=10;break}return e.next=4,f.a.post("https://todo-backend-h3.herokuapp.com/user").set("authorization","Bearer ".concat(n));case 4:c=e.sent,a(!0),l(c.body.user),k.a.save("token",c.body.token),e.next=12;break;case 10:a(!1),l({});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=k.a.load("token");p({token:e})}),[]);var O={isLoggedIn:c,user:o,lofInFunction:d,logOutFunction:function(){a(!1),l({}),k.a.remove("token"),k.a.remove("user")},can:function(e){var t;return console.log(o),o.capabilities=void 0===(null===o||void 0===o?void 0:o.capabilities)?["read","write","edit","delete"]:null===o||void 0===o?void 0:o.capabilities,null===o||void 0===o||null===(t=o.capabilities)||void 0===t?void 0:t.includes(e)},setUser:l,markAsLoggedIn:function(){a(!0)},signupFunction:u};return Object(j.jsx)(C.Provider,{value:O,children:e.children})},S=o.a.createContext();function D(e){var t=Object(i.useState)(0),n=Object(b.a)(t,2),c={incomplete:n[0],setIncomplete:n[1]};return Object(j.jsx)(S.Provider,{value:c,children:e.children})}var L=n(35);function I(e){var t=Object(i.useContext)(C),n=t.isLoggedIn,c=t.can(e.capability);return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(L.a,{condition:n&&c,children:e.children})})}var F=n(439),N=n(2);function A(e){var t=e.handleCloseDrawer,n=Object(i.useContext)(d),c=Object(i.useState)(n.displayCompleted),a=Object(b.a)(c,2),s=a[0],r=a[1];return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={displayCompleted:s,pageLimit:e.target.pageLimit.value||n.pageLimit};localStorage.setItem("pageSettingsContext",JSON.stringify(c)),n.setSubmitFlag(!n.submitFlag),t()},children:[Object(j.jsx)("h4",{"data-testid":"formHeader",children:"Page Settings"}),Object(j.jsx)("hr",{}),Object(j.jsx)("br",{}),Object(j.jsx)(F.e,{checked:!0===s,label:"Display Completed",onChange:function(){r(!0!==s)}}),Object(j.jsx)("br",{}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"Items Per Page"}),Object(j.jsx)("input",{class:"bp3-input",name:"pageLimit",type:"number"}),Object(j.jsx)("br",{}),Object(j.jsx)("p",{children:Object(j.jsxs)("strong",{children:["Current Items Per Page: ",n.pageLimit]})})]}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{children:Object(j.jsx)(F.a,{class:"bp3-button",type:"submit",children:"Save Changes"})})]})}var P=n(36);function T(){var e=Object(i.useContext)(C),t=Object(i.useContext)(S),n=Object(i.useState)(!1),c=Object(b.a)(n,2),a=c[0],s=c[1],r=function(){s(!1)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(F.d,{class:"bp3-navbar bp3-dark",style:{background:"#008075"},children:[Object(j.jsxs)(F.d.Group,{children:[Object(j.jsx)(F.d.Heading,{children:Object(j.jsx)("strong",{children:"ToDo List Manager"})}),Object(j.jsx)(F.d.Divider,{}),Object(j.jsx)(I,{capability:"read",children:Object(j.jsxs)("strong",{children:[t.incomplete," items pending"]})})]}),Object(j.jsxs)(F.d.Group,{className:"bp3-navbar-group bp3-align-right",children:[Object(j.jsxs)(L.a,{condition:!e.isLoggedIn,children:[Object(j.jsx)(P.b,{to:"/todo-app/signup",children:Object(j.jsx)(F.a,{className:"bp3-minimal",icon:"new-person",text:"Signup"})}),Object(j.jsx)(P.b,{to:"/todo-app/",children:Object(j.jsx)(F.a,{className:"bp3-minimal",icon:"log-in",text:"Login"})})]}),Object(j.jsxs)(L.a,{condition:e.isLoggedIn,children:[Object(j.jsx)(F.a,{className:"bp3-minimal",icon:"home",text:"Home"}),Object(j.jsx)(F.a,{className:"bp3-minimal ",icon:"cog",text:"Settings",onClick:function(){return s(!0)}}),Object(j.jsx)(P.b,{to:"/todo-app/",children:Object(j.jsx)(F.a,{className:"bp3-minimal",icon:"log-out",text:"Logout",onClick:e.logOutFunction})})]})]})]}),Object(j.jsx)(F.c,{style:{left:"30"},isOpen:a,onClose:r,size:"300px",usePortal:!0,hasBackdrop:!0,canOutsideClickClose:!0,children:Object(j.jsx)("div",{className:N.a.DRAWER_BODY,children:Object(j.jsx)("div",{className:N.a.DIALOG_BODY,children:Object(j.jsx)(A,{handleCloseDrawer:r})})})})]})}var B=n(33),E=(n(424),n(40)),H=n(37),_=function(e){var t=Object(i.useState)({}),n=Object(b.a)(t,2),c=n[0],a=n[1];return{handleChange:function(e){e.persist(),a((function(t){return Object(H.a)(Object(H.a)({},t),{},Object(E.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(c)},values:c}},J=n(440);n(425);function U(e){var t=e.addItem,n=_((function(e){return s.apply(this,arguments)})),c=n.handleChange,a=n.handleSubmit;function s(){return(s=Object(x.a)(h.a.mark((function e(n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.frontend_id=Object(J.a)(),n.complete=!1,n.difficulty||(n.difficulty=3),console.log(n),e.next=6,f.a.post("https://todo-backend-h3.herokuapp.com/items",n);case 6:c=e.sent,t(c.body);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("form",{id:"newForm",onSubmit:a,children:[Object(j.jsx)("h4",{"data-testid":"formHeader",children:"Add a New ToDo"}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"Title"}),Object(j.jsx)("input",{class:"bp3-input",onChange:c,name:"text",type:"text",placeholder:"Item Details"})]}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"Assigned To"}),Object(j.jsx)("input",{class:"bp3-input",onChange:c,name:"assignee",type:"text",placeholder:"Assignee Name"})]}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"Difficulty"}),"\xa0",Object(j.jsx)("input",{onChange:c,defaultValue:3,type:"range",min:1,max:5,name:"difficulty"})]}),Object(j.jsx)("label",{children:Object(j.jsx)(F.a,{class:"bp3-button",type:"submit",children:"Add Item"})})]})}var z=n(41);n(426);function G(e){var t=e.item,n=e.toggleComplete,c=e.toggleDelete;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(F.b,{interactive:!0,elevation:z.a.TWO,children:[Object(j.jsx)("h5",{"data-testid":"todoHeader",children:t.text}),Object(j.jsxs)("p",{children:["Assigned to: ",t.assignee]}),Object(j.jsxs)("p",{children:["Difficulty: ",t.difficulty]}),Object(j.jsxs)(I,{capability:"update",children:["Completed: ",Object(j.jsx)(F.a,{class:"bp3-button",onClick:function(){return n(t.id)},children:t.complete.toString()})]}),Object(j.jsxs)(I,{capability:"delete",children:[Object(j.jsx)("br",{}),Object(j.jsx)(F.a,{class:"bp3-button",onClick:function(){return c(t.id)},children:"Clear"})]})]}),Object(j.jsx)("br",{})]})}var M=n(436),R=n(437),W=n(438),Y=function(){var e=Object(i.useContext)(d),t=Object(i.useContext)(S),n=Object(i.useContext)(C),c=Object(i.useState)([]),a=Object(b.a)(c,2),s=a[0],r=a[1],o=Object(i.useState)([]),l=Object(b.a)(o,2),u=l[0],p=l[1],O=Object(i.useState)([]),m=Object(b.a)(O,2),g=m[0],v=m[1],y=Object(i.useState)([]),k=Object(b.a)(y,2),w=k[0],D=k[1],L=Object(i.useState)([]),N=Object(b.a)(L,2),A=N[0],P=N[1],T=Object(i.useState)([]),E=Object(b.a)(T,2),H=E[0],_=E[1],J=Object(i.useState)(1),z=Object(b.a)(J,2),Y=z[0],V=z[1],q=Object(i.useState)(1),K=Object(b.a)(q,2),Q=K[0],X=K[1],Z=Object(i.useState)([]),$=Object(b.a)(Z,2),ee=$[0],te=$[1],ne=Object(i.useState)([]),ce=Object(b.a)(ne,2),ae=ce[0],se=ce[1];function re(e){return ie.apply(this,arguments)}function ie(){return ie=Object(x.a)(h.a.mark((function e(t){var n,c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.map(function(){var e=Object(x.a)(h.a.mark((function e(n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id!==t){e.next=5;break}return e.next=3,f.a.put("https://todo-backend-h3.herokuapp.com/items/".concat(n.id),{assignee:n.assignee,complete:!n.complete,difficulty:n.difficulty,frontend_id:n.frontend_id,text:n.text});case 3:c=e.sent,n=c.body;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,f.a.get("https://todo-backend-h3.herokuapp.com/items");case 3:n=e.sent,r(Object(B.a)(n.body)),c=n.body.filter((function(e){return e.complete})),v(Object(B.a)(c)),a=n.body.filter((function(e){return!e.complete})),p(Object(B.a)(a));case 9:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function oe(e){return le.apply(this,arguments)}function le(){return le=Object(x.a)(h.a.mark((function e(t){var n,c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.map(function(){var e=Object(x.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id!==t){e.next=5;break}return console.log("hi"),e.next=4,f.a.delete("https://todo-backend-h3.herokuapp.com/items/".concat(n.id));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,f.a.get("https://todo-backend-h3.herokuapp.com/items");case 3:n=e.sent,r(Object(B.a)(n.body)),c=n.body.filter((function(e){return e.complete})),v(Object(B.a)(c)),a=n.body.filter((function(e){return!e.complete})),p(Object(B.a)(a));case 9:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}function ue(t,n,c,a){var s=Math.ceil(t.length/e.pageLimit);n(Array.from({length:s},(function(e,t){return t+1}))),c(function(e,t){for(var n=[],c=Number(t),a=0;a<e.length;a+=c){var s=e.slice(a,a+c);n.push(s)}return n}(t,e.pageLimit)[a-1])}return Object(i.useEffect)((function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://todo-backend-h3.herokuapp.com/items");case 2:t=e.sent,r(t.body),n=t.body.filter((function(e){return e.complete})),c=t.body.filter((function(e){return!e.complete})),v(Object(B.a)(n)),p(Object(B.a)(c));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(i.useEffect)((function(){var e=u.length;D(e),t.setIncomplete(e),document.title="To Do List: ".concat(w),ue(u,te,P,Y),ue(g,se,_,Q)}),[Y,Q,s,u,g,n.user]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(M.a,{id:"homepage",children:Object(j.jsxs)(R.a,{children:[Object(j.jsx)(W.a,{children:Object(j.jsx)(I,{capability:"create",children:Object(j.jsx)(U,{addItem:function(e){p([].concat(Object(B.a)(u),[e]))}})})}),Object(j.jsx)(W.a,{children:Object(j.jsxs)(I,{capability:"read",children:[Object(j.jsx)("h5",{children:"Uncompleted Tasks"}),Object(j.jsx)("div",{id:"pageNumbers",children:null===ee||void 0===ee?void 0:ee.map((function(e){return Object(j.jsx)("div",{style:{padding:"5px"},children:Object(j.jsxs)(F.a,{className:"bp3-button",style:{cursor:"pointer"},onClick:function(){return function(e){V(e)}(e)},children:[" ",e," "]})})}))}),null===A||void 0===A?void 0:A.map((function(e){return Object(j.jsx)(G,{item:e,toggleComplete:re,toggleDelete:oe},e.id)})),Object(j.jsx)("br",{}),e.displayCompleted&&Object(j.jsxs)("div",{children:[Object(j.jsx)("h5",{children:"Completed Tasks"}),Object(j.jsx)("div",{id:"pageNumbers",children:null===ae||void 0===ae?void 0:ae.map((function(e){return Object(j.jsx)("div",{style:{padding:"5px"},children:Object(j.jsxs)(F.a,{className:"bp3-button",style:{cursor:"pointer"},onClick:function(){return function(e){X(e)}(e)},children:[" ",e," "]})})}))}),null===H||void 0===H?void 0:H.map((function(e){return Object(j.jsx)(G,{item:e,toggleComplete:re,toggleDelete:oe},e.id)}))]})]})})]})})})};n(194);function V(){var e=Object(i.useContext)(C),t=Object(i.useState)({username:"",password:""}),n=Object(b.a)(t,2),c=n[0],a=n[1],s=function(e){e.preventDefault(),a(Object(H.a)(Object(H.a)({},c),{},Object(E.a)({},e.target.name,e.target.value)))};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(L.a,{condition:!e.isLoggedIn,children:Object(j.jsxs)("form",{id:"newForm",onSubmit:function(t){t.preventDefault(),e.lofInFunction(c.username,c.password)},children:[Object(j.jsx)("h2",{children:"Log In Form"}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"username"}),Object(j.jsx)("input",{class:"bp3-input",type:"text",name:"username",placeholder:"username",onChange:s})]}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"password"}),Object(j.jsx)("input",{class:"bp3-input",type:"password",name:"password",placeholder:"password",onChange:s})]}),Object(j.jsx)("label",{children:Object(j.jsx)("button",{class:"bp3-button",type:"submit",children:"login"})}),Object(j.jsx)("label",{children:Object(j.jsx)(P.b,{to:"/todo-app/signup",children:Object(j.jsx)("button",{class:"bp3-button",type:"submit",children:"signup"})})})]})})})}function q(){var e=Object(i.useContext)(C),t=Object(i.useState)({username:"",email:"",password:"",role:"user"}),n=Object(b.a)(t,2),c=n[0],a=n[1],s=function(e){e.preventDefault(),a(Object(H.a)(Object(H.a)({},c),{},Object(E.a)({},e.target.name,e.target.value)))};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(L.a,{condition:!e.isLoggedIn,children:Object(j.jsxs)("form",{id:"newForm",onSubmit:function(t){t.preventDefault(),e.signupFunction(c),console.log(c)},children:[Object(j.jsx)("h2",{children:"Sign Up Form"}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"username"}),Object(j.jsx)("input",{class:"bp3-input",type:"text",name:"username",placeholder:"username",onChange:s})]}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"email"}),Object(j.jsx)("input",{class:"bp3-input",type:"text",name:"email",placeholder:"email",onChange:s})]}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{children:"password"}),Object(j.jsx)("input",{class:"bp3-input",type:"password",name:"password",placeholder:"password",onChange:s})]}),Object(j.jsxs)("label",{class:"bp3-label",children:[Object(j.jsx)("span",{style:{margin:"5px"},children:"role"}),Object(j.jsxs)("select",{name:"role",onChange:s,children:[Object(j.jsx)("option",{name:"role",value:"user",children:"user"}),Object(j.jsx)("option",{name:"role",value:"writer",children:"writer"}),Object(j.jsx)("option",{name:"role",value:"editor",children:"editor"}),Object(j.jsx)("option",{name:"role",value:"admin",children:"admin"})]})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{style:{margin:"5px"},class:"bp3-button",type:"submit",children:"SignUp"})})]})})})}n(427),n(428);var K=n(16);function Q(){return Object(j.jsx)(P.a,{children:Object(j.jsx)(w,{children:Object(j.jsx)(p,{children:Object(j.jsxs)(D,{children:[Object(j.jsx)(T,{}),Object(j.jsxs)(K.c,{children:[Object(j.jsxs)(K.a,{exact:!0,path:"/todo-app/",children:[Object(j.jsx)(V,{}),Object(j.jsx)(Y,{})]}),Object(j.jsx)(K.a,{path:"/todo-app/signup",children:Object(j.jsx)(q,{})})]})]})})})})}n(429),n(430);var X=function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsx)(Q,{})}}]),n}(o.a.Component),Z=document.getElementById("root");u.a.render(Object(j.jsx)(X,{}),Z)}},[[431,1,2]]]);
//# sourceMappingURL=main.7063c97a.chunk.js.map